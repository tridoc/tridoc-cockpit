(function(t){function e(e){for(var r,o,s=e[0],l=e[1],c=e[2],u=0,v=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&v.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(v.length)v.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},n={app:0},i=[];function o(t){return s.p+"js/"+({pdfjsWorker:"pdfjsWorker"}[t]||t)+"."+{pdfjsWorker:"dcd3b2b3"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,r){a=n[t]=[e,r]}));e.push(a[2]=r);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(t);var c=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",c.name="ChunkLoadError",c.type=r,c.request=i,a[1](c)}n[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/tridoc-cockpit/",s.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"08f7":function(t,e,a){"use strict";var r=a("59e6"),n=a.n(r);n.a},1:function(t,e){},1077:function(t,e,a){"use strict";var r=a("fe9c"),n=a.n(r);n.a},"12ea":function(t,e,a){},2:function(t,e){},"28d8":function(t,e,a){},3:function(t,e){},"37b0":function(t,e,a){"use strict";var r=a("382f"),n=a.n(r);n.a},"382f":function(t,e,a){},"3be2":function(t,e,a){"use strict";var r=a("92ff"),n=a.n(r);n.a},"3f0a":function(t,e,a){"use strict";var r=a("acc3"),n=a.n(r);n.a},4:function(t,e){},"48a6":function(t,e,a){},"55d9":function(t,e,a){},"59e6":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var r=a("9c0c"),n=a.n(r);n.a},"7f0d":function(t,e,a){},"82cf":function(t,e,a){"use strict";var r=a("fd45"),n=a.n(r);n.a},"92ff":function(t,e,a){},"9c0c":function(t,e,a){},a5c2:function(t,e,a){"use strict";var r=a("a9d2"),n=a.n(r);n.a},a9d2:function(t,e,a){},abbb:function(t,e,a){},acc3:function(t,e,a){},cc29:function(t,e,a){"use strict";var r=a("55d9"),n=a.n(r);n.a},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},i=[],o=a("d4ec"),s=a("bee2"),l=a("262e"),c=a("2caf"),u=a("9ab4"),d=a("60a3"),v=(a("ff00"),a("12ea"),function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a,[{key:"changeDarkmode",value:function(t){this.$vuetify.theme.dark=t}},{key:"created",value:function(){this.$store.dispatch("restore")}}]),a}(d["d"]));Object(u["a"])([Object(d["e"])("$store.state.viewSettings.darkMode")],v.prototype,"changeDarkmode",null),v=Object(u["a"])([Object(d["a"])({})],v);var p=v,m=p,h=(a("5c0b"),a("2877")),f=Object(h["a"])(m,n,i,!1,null,null,null),g=f.exports,b=a("f309"),y=a("fcf4");r["a"].use(b["a"]);var _=new b["a"]({theme:{themes:{light:{primary:"#00685b",secondary:"#c86852",accent:"#f86158",error:y["a"].red.base},dark:{primary:{base:"#00887b",darken1:"#00887b"},secondary:{base:"#ec8d79",darken1:"#ffb39b"},accent:"#f86158",error:y["a"].red.base}}}}),k=a("8c4f"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.mdAndUp,app:"",width:"288"},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-divider"),a("v-list",{attrs:{nav:"",dense:""}},[t.$store.getters.server?a("v-list-item",{attrs:{disabled:""}},[a("v-list-item-content",[a("v-list-item-subtitle",[t._v(t._s(t.$store.getters.server.url))])],1)],1):t._e()],1)]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("div",{staticClass:"pa-3"},[a("v-subheader",[t._v("TAGS")]),a("tag-creator",{on:{tagcreated:t.reload,error:function(e){return t.onError({title:t.r.error,message:t.r.message})}}}),t._l(t.tags,(function(e){return a("tag-filter",{key:e.label,attrs:{tag:e,reload:t.reload,getDocuments:t.getDocuments,error:t.onError,deleteTag:t.deleteTag,tags:t.tags,search:t.search},on:{"update:search":function(e){t.search=e}}})})),a("v-btn",{staticClass:"my-2",attrs:{block:"",outlined:"",text:"",small:"",color:"error accent-1"},on:{click:t.clearTags}},[t._v(" Clear Tag Filters ")]),a("v-btn",{staticClass:"my-2",attrs:{block:"",outlined:"",text:"",small:"",color:"error accent-1"},on:{click:t.clearSearch}},[t._v(" Clear All Filters ")])],2)]),a("settings-drawer",{attrs:{open:t.settingsOpen},on:{"update:open":function(e){t.settingsOpen=e},save:t.serverchange,delete:t.serverremove}}),a("help-drawer",{attrs:{open:t.helpOpen},on:{"update:open":function(e){t.helpOpen=e}}}),a("v-app-bar",{attrs:{"clipped-left":"",app:"",color:"primary","elevate-on-scroll":"",dark:""}},[a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-app-bar-nav-icon",t._g(t._b({on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}},"v-app-bar-nav-icon",n,!1),r),[a("v-icon",[t._v("mdi-tag-multiple")])],1)]}}])},[t._v(" Tag filters ")]),a("v-toolbar-title",{staticClass:"hidden-sm-and-down",staticStyle:{width:"300px"}},[a("strong",[t._v("tridoc")])]),a("v-spacer"),a("v-text-field",{attrs:{flat:"","solo-inverted":"","hide-details":"",clearable:"","dclear-icon":"mdi-filter-remove","prepend-inner-icon":"mdi-magnify",label:"Search"},on:{change:t.getDocuments,"click:clear":function(e){t.search.text="",t.reload()}},model:{value:t.search.text,callback:function(e){t.$set(t.search,"text",e)},expression:"search.text"}}),a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:t.reload}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-refresh")])],1)]}}])},[t._v(" Refresh ")]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.helpOpen=!t.helpOpen}}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-help-circle")])],1)]}}])},[t._v(" Help & About ")]),a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){e.stopPropagation(),t.settingsOpen=!t.settingsOpen}}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-cog")])],1)]}}])},[t._v(" Settings ")]),a("v-progress-linear",{attrs:{active:t.loading,indeterminate:t.loading,absolute:"",bottom:"",color:"white"}})],1),a("v-main",{attrs:{app:""}},[a("v-container",{staticClass:"sfill-height",attrs:{fluid:""},on:{drag:function(t){t.stopPropagation(),t.preventDefault()},dragstart:function(t){t.stopPropagation(),t.preventDefault()},dragend:function(t){t.stopPropagation(),t.preventDefault()},dragover:function(t){t.stopPropagation(),t.preventDefault()},dragenter:function(t){t.stopPropagation(),t.preventDefault()},dragleave:function(t){t.stopPropagation(),t.preventDefault()},drop:function(e){return e.stopPropagation(),e.preventDefault(),t.addFile(e)}}},[t.welcome?a("v-row",{attrs:{align:"start"}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{outlined:""}},[a("v-card-title",[t._v("Welcome")]),a("v-card-text",[t._v(" It looks like there’s no server configured. If this is your first time using Tridoc, "),a("a",{staticClass:"text-decoration-underline",on:{click:function(e){e.stopPropagation(),t.helpOpen=!0}}},[t._v("have a look at “Help & About”")]),t._v(". ")]),a("v-card-text",{staticClass:"pt-0"},[t._v(" This message will disappear as soon as you "),a("a",{staticClass:"text-decoration-underline",on:{click:function(e){e.stopPropagation(),t.settingsOpen=!0}}},[t._v("connect to a server in the settings")]),t._v(". ")])],1)],1)],1):t._e(),a("v-row",{attrs:{align:"start"}},[a("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[a("error-dialog",{attrs:{error:t.error,close:function(){return t.error=null}}})],1)],1),a("v-row",{staticClass:"mt-3",attrs:{align:"start"}},[a("v-col",{attrs:{cols:"12"}},[a("document-list",{attrs:{docs:t.docs,loading:t.loading}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"auto",align:"center"}},[a("v-btn",{staticClass:"ma-2",attrs:{disabled:t.options.page<2,outlined:"",text:"",fab:"",small:""},on:{click:function(e){return t.paginationFirst()}}},[a("v-icon",[t._v("mdi-page-first")])],1),a("v-btn",{staticClass:"ma-2",attrs:{disabled:t.options.page<2,outlined:"",text:"",fab:"",small:""},on:{click:function(e){return t.paginationPrev()}}},[a("v-icon",[t._v("mdi-chevron-left")])],1),a("span",{staticClass:"ma-2"},[t._v(" "+t._s(t.docscounter())+" ")]),a("span",{staticClass:"ma-2"},[t._v(" page "+t._s(t.pagecounter())+" ")]),a("v-btn",{staticClass:"ma-2",attrs:{disabled:t.options.page*t.options.itemsPerPage>=t.count,outlined:"",text:"",fab:"",small:""},on:{click:function(e){return t.paginationNext()}}},[a("v-icon",[t._v("mdi-chevron-right")])],1),a("v-btn",{staticClass:"ma-2",attrs:{disabled:t.options.page*t.options.itemsPerPage>=t.count,outlined:"",text:"",fab:"",small:""},on:{click:function(e){return t.paginationLast()}}},[a("v-icon",[t._v("mdi-page-last")])],1)],1)],1),a("v-row",{attrs:{align:"start"}},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{outlined:""}},[a("v-data-table",{attrs:{"disable-sort":"","disable-filtering":"",headers:t.uploadHeaders,items:t.uploadDocs,"item-key":"file.name","disable-pagination":"","hide-default-footer":"","hide-default-header":"","no-data-text":"Drop documents here to upload"},scopedSlots:t._u([{key:"item.actions",fn:function(e){var r=e.item;return[a("div",{staticClass:"mr-n3"},[a("v-btn",{staticClass:"ma-1",attrs:{small:"",text:"",outlined:"",color:"error accent-1"},on:{click:function(e){return t.removeUploadDocument(r)}}},[a("v-icon",{attrs:{small:"",left:!t.$vuetify.breakpoint.sm}},[t._v("mdi-close")]),a("span",{attrs:{hidden:t.$vuetify.breakpoint.sm}},[t._v("Cancel")])],1),a("v-btn",{staticClass:"ma-1",attrs:{small:"",color:"primary",loading:r.loading},on:{click:function(e){return t.uploadDocument(r)}}},[a("v-icon",{attrs:{small:"",left:!t.$vuetify.breakpoint.sm}},[t._v("mdi-upload")]),a("span",{attrs:{hidden:t.$vuetify.breakpoint.sm}},[t._v("Upload")])],1)],1)]}},{key:"footer",fn:function(){return[a("v-divider"),a("div",{staticClass:"d-flex"},[a("v-btn",{staticClass:"ma-2",attrs:{outlined:"",small:"",text:"",color:"primary"}},[a("span",[t._v("Add File")]),a("input",{attrs:{type:"file"},on:{change:t.addFileInput}})]),a("v-spacer"),a("v-btn",{staticClass:"ma-2",attrs:{outlined:"",small:"",text:"",color:"primary",disabled:0===t.uploadDocs.length},on:{click:t.uploadAll}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-upload")]),a("span",[t._v("Upload All")])],1)],1)]},proxy:!0}])})],1)],1)],1)],1)],1)],1)},x=[],O=a("2909"),j=a("5530"),C=(a("ac1f"),a("841c"),a("d3b7"),a("25f0"),a("99af"),a("d81d"),a("159b"),a("f20a"),a("3ca3"),a("ddb0"),a("a434"),a("c740"),a("5319"),a("b0c0"),a("4de4"),a("4e827"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{staticClass:"top",attrs:{app:"","mobile-breakpoint":"0",width:t.$vuetify.breakpoint.smAndUp?432:"100vw",temporary:"",right:"",absolute:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-app-bar",{attrs:{fixed:"",dark:"",color:"primary",flat:"","elevate-on-scroll":""}},[a("v-toolbar-title",[t._v("Settings")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.show=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("v-main",{staticClass:"scroll"},[a("v-container",{staticClass:"px-4 pb-0",attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"pt-4"},[a("v-label",{attrs:{for:"dmswitch"}},[t._v(" Dark Mode ")])],1),a("v-col",{attrs:{cols:"auto"}},[a("v-switch",{staticClass:"my-0 ml-2 mr-n3",attrs:{id:"dmswitch",inset:"","hide-details":""},model:{value:t.viewSettingsDark,callback:function(e){t.viewSettingsDark=e},expression:"viewSettingsDark"}})],1)],1),a("v-row",[a("v-col",{staticClass:"pt-4"},[a("v-label",{attrs:{for:"gridswitch"}},[t._v(" Use Grid View ")])],1),a("v-col",{attrs:{cols:"auto"}},[a("v-switch",{staticClass:"my-0 ml-2 mr-n3",attrs:{id:"gridswitch",inset:"","hide-details":""},model:{value:t.viewSettingsGrid,callback:function(e){t.viewSettingsGrid=e},expression:"viewSettingsGrid"}})],1)],1),a("v-row",[a("v-col",{staticClass:"pt-4"},[a("v-label",{attrs:{for:"denseswitch"}},[t._v(" Dense ")])],1),a("v-col",{attrs:{cols:"auto"}},[a("v-switch",{staticClass:"my-0 ml-2 mr-n3",attrs:{id:"denseswitch",inset:"","hide-details":""},model:{value:t.viewSettingsDense,callback:function(e){t.viewSettingsDense=e},expression:"viewSettingsDense"}})],1)],1),a("v-row",[a("v-col",[a("v-divider")],1)],1),a("v-row",{staticClass:"mb-4"},[a("v-col",[a("v-btn",{attrs:{color:"primary",block:""},on:{click:t.addRow}},[t._v("Add Server")])],1)],1),t._l(t.iservers,(function(e,r){return a("v-form",{key:e.id,ref:1e3*(e.id+1)+r+1,refInFor:!0,model:{value:e.valid,callback:function(a){t.$set(e,"valid",a)},expression:"server.valid"}},[a("v-row",{staticClass:"mx-n3",attrs:{dense:""}},[a("v-col",{attrs:{cols:"auto"}},[a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-btn",t._g(t._b({staticClass:"m",attrs:{icon:"",color:r===t.$store.state.currentServer||t.isModified(e,r)?"primary darken-1":""},on:{click:function(a){return t.save(r,e)}}},"v-btn",o,!1),i),[t.isModified(e,r)?a("v-icon",[t._v("mdi-content-save")]):r===t.$store.state.currentServer?a("v-icon",[t._v("mdi-checkbox-marked-circle-outline")]):a("v-icon",[t._v("mdi-checkbox-blank-circle-outline")])],1)]}}],null,!0)},[t.isModified(e,r)?a("span",[t._v("Save changes")]):r===t.$store.state.currentServer?a("span",[t._v("Selected")]):a("span",[t._v("Select")])])],1),a("v-col",[a("v-text-field",{attrs:{outlined:"",rules:t.urlRules,label:"Server URL",required:""},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"server.url"}})],1),a("v-col",[a("v-text-field",{attrs:{outlined:"",type:e.show?"text":"password",rules:t.passwordRules,"append-icon":e.show?"mdi-eye-outline":"mdi-eye-off-outline",label:"Password",required:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(a){t.$set(e,"password",a)},expression:"server.password"}})],1),a("v-col",{attrs:{cols:"auto"}},[a("v-menu",{attrs:{bottom:"",left:"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"m",attrs:{icon:""}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[a("v-list",[a("div",{staticClass:"text-caption px-4 py-2"},[t._v(t._s(e.url))]),a("v-list-item",{on:{click:function(e){return t.remove(r)}}},[a("v-list-item-icon",{staticClass:"mr-4"},[a("v-icon",{attrs:{color:"red accent-1"}},[t._v("mdi-delete")])],1),a("v-list-item-title",[t._v("Remove Server")])],1),a("v-list-item",{attrs:{disabled:t.downloadingBackup[e.url]||!e.valid},on:{click:function(a){return t.downloadBackup(e.url)}}},[a("v-list-item-icon",{staticClass:"mr-4"},[t.downloadingBackup[e.url]?a("v-progress-circular",{attrs:{indeterminate:"",color:t.$vuetify.theme.dark?"grey lighten-2":"grey darken-2",size:"24",width:"3"}}):a("v-icon",[t._v("mdi-package-down")])],1),a("v-list-item-title",[t._v("Download Backup (ZIP)")])],1),a("v-list-item",{attrs:{disabled:t.downloadingRDF[e.url]||!e.valid},on:{click:function(a){return t.downloadRDF(e.url)}}},[a("v-list-item-icon",{staticClass:"mr-4"},[t.downloadingRDF[e.url]?a("v-progress-circular",{attrs:{indeterminate:"",color:t.$vuetify.theme.dark?"grey lighten-2":"grey darken-2",size:"24",width:"3"}}):a("v-icon",[t._v("mdi-semantic-web")])],1),a("v-list-item-title",[t._v("Download RDF Metadata")])],1)],1)],1)],1)],1)],1)})),t.installable?a("v-row",[a("v-col",[a("v-divider")],1)],1):t._e(),a("v-row",{staticClass:"mb-3"},[a("v-col",[t.installable?a("v-btn",{attrs:{block:""},on:{click:t.install}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus-circle-outline")]),t._v(" Add to Homescreen ")],1):t._e()],1)],1)],2)],1)],1)}),$=[],V=(a("2ca0"),a("2b3d"),a("9861"),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.startsWith("http://")&&t.startsWith("https://")||(t="https://"+t);try{var e=new URL(t);return e.href.replace(/\/$/,"")}catch(a){return!1}}),S=function(){var t=0;return function(){return t++}}(),D=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.iservers=t.$store.state.servers.map((function(e){var a=e.password,r=e.url;return{id:t.counter(),valid:!1,show:!1,password:a,url:r}})),t.urlRules=[function(t){return!!t||"URL is required"},function(t){var e=V(t);return!!e||"URL has to be valid"}],t.passwordRules=[function(t){return!!t||"Password is required"}],t.downloadingBackup={},t.downloadingRDF={},t.installable=!1,t}return Object(s["a"])(a,[{key:"onServersChanged",value:function(){var t=this;this.iservers=this.$store.state.servers.map((function(e){var a=e.password,r=e.url;return{id:t.counter(),valid:!1,password:a,url:r}}))}},{key:"counter",value:function(){return S()}},{key:"save",value:function(t,e){var a=e.url,r=e.password,n=e.valid;n&&this.$emit("save",{index:t,url:a,password:r})}},{key:"remove",value:function(t){this.$emit("delete",t)}},{key:"addRow",value:function(){this.iservers.push({id:this.counter(),password:"",url:"",valid:!1})}},{key:"isModified",value:function(t,e){return!this.$store.state.servers[e]||!this.$store.state.servers[e].url||!this.$store.state.servers[e].password||this.$store.state.servers[e].url!==t.url||this.$store.state.servers[e].password!==t.password}},{key:"viewSettingsDark",get:function(){return this.$store.state.viewSettings.darkMode},set:function(t){this.$store.commit("viewSettings",{darkMode:t})}},{key:"viewSettingsGrid",get:function(){return this.$store.state.viewSettings.grid},set:function(t){this.$store.commit("viewSettings",{grid:t})}},{key:"viewSettingsDense",get:function(){return this.$store.state.viewSettings.dense},set:function(t){this.$store.commit("viewSettings",{dense:t})}},{key:"downloadBackup",value:function(t){var e=this;d["d"].set(this.downloadingBackup,t,!0);var a=(t.startsWith("https://")||t.startsWith("http://")?t:"https://"+t)+"/raw/zip",r={headers:{Authorization:this.$store.getters.server.server.headers.get("Authorization")}};fetch(a,r).then((function(t){return t.blob()})).then((function(a){d["d"].set(e.downloadingBackup,t,!1);var r=document.createElement("a");r.href=URL.createObjectURL(a),r.download="tridoc_backup_"+Date.now()+".zip",r.click()}))}},{key:"downloadRDF",value:function(t){var e=this;d["d"].set(this.downloadingRDF,t,!0);var a=(t.startsWith("https://")||t.startsWith("http://")?t:"https://"+t)+"/raw/rdf",r={headers:{Authorization:this.$store.getters.server.server.headers.get("Authorization")}};fetch(a,r).then((function(t){return t.blob()})).then((function(a){d["d"].set(e.downloadingRDF,t,!1);var r=document.createElement("a");r.href=URL.createObjectURL(a),r.download="tridoc_backup_"+Date.now()+".ttl",r.click()}))}},{key:"install",value:function(){var t=this;this.installable.prompt(),this.installable.userChoice.then((function(e){"accepted"===e.outcome&&(t.installable=!1)}))}},{key:"mounted",value:function(){var t=this;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),t.installable=e}))}}]),a}(d["d"]);Object(u["a"])([Object(d["c"])("open")],D.prototype,"show",void 0),D=Object(u["a"])([Object(d["a"])({})],D);var T=D,P=T,M=(a("3f0a"),a("6544")),A=a.n(M),R=a("40dc"),L=a("8336"),I=a("62ad"),E=a("a523"),U=a("ce7e"),F=a("4bd4"),z=a("132d"),q=a("24c9"),B=a("8860"),N=a("da13"),W=a("34c3"),G=a("5d23"),H=a("f6c4"),Y=a("e449"),J=a("f774"),X=a("490a"),K=a("0fd9"),Z=a("2fa4"),Q=a("b73d"),tt=a("8654"),et=a("2a7f"),at=a("3a2f"),rt=Object(h["a"])(P,C,$,!1,null,"f3f753cc",null),nt=rt.exports;A()(rt,{VAppBar:R["a"],VBtn:L["a"],VCol:I["a"],VContainer:E["a"],VDivider:U["a"],VForm:F["a"],VIcon:z["a"],VLabel:q["a"],VList:B["a"],VListItem:N["a"],VListItemIcon:W["a"],VListItemTitle:G["c"],VMain:H["a"],VMenu:Y["a"],VNavigationDrawer:J["a"],VProgressCircular:X["a"],VRow:K["a"],VSpacer:Z["a"],VSwitch:Q["a"],VTextField:tt["a"],VToolbarItems:et["a"],VToolbarTitle:et["b"],VTooltip:at["a"]});var it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{staticClass:"top",attrs:{app:"","mobile-breakpoint":"0",width:t.$vuetify.breakpoint.smAndUp?432:"100vw",temporary:"",right:"",absolute:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-app-bar",{attrs:{fixed:"",dark:"",color:"primary",flat:"","elevate-on-scroll":""}},[a("v-toolbar-title",[t._v("Help & About")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.show=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("v-main",{staticClass:"scroll"},[a("v-container",{staticClass:"px-4",attrs:{fluid:""}},[a("h2",{staticClass:"mb-3"},[t._v("Help")]),a("h3",[t._v("Server")]),a("p",[t._v(" Set your server in the settings. They’re accessible via the cog icon in the top right corner (only visible after closing this window). If you haven’t access to any server, "),a("a",{attrs:{href:"https://github.com/tridoc/tridoc-backend/blob/master/README.md"}},[t._v("learn how to set one up")]),t._v(". ")]),a("h3",[t._v("Tags and Filters")]),a("p",[t._v(" Tridoc has an advanced tagging system with two kinds of tags: normal tags which behave as you’d expect and “parameterizable” tags which allow either a number or date to be set when adding them to documents. This allows for more specific filtering for certain ranges of values. The tag filters can be either in- or exclusive and are added together: A document must fulfil all filters to show up in the results. ")]),a("p",[t._v(" The search bar searches in document texts and titles. For this purpose, the server tries to do OCR (character recognition) on all documents which don’t already contain text metadata. ")]),a("h3",[t._v("Comments")]),a("p",[t._v(" There exists the ability to add comments to documents. Currently, there is no way of deleting or editing comments. ")]),a("v-divider"),a("h2",{staticClass:"my-3"},[t._v("About Tridoc")]),a("p",[t._v(" Tridoc aims to provide easy document management for individuals and small teams. ")]),a("p",[t._v(" On the server-side, Tridoc runs using hapijs in node and fuseki. "),a("a",{attrs:{href:"https://github.com/tridoc/tridoc-backend"}},[t._v("View the repository of the backend.")])]),a("p",[t._v(" There also exists "),a("a",{attrs:{href:"https://github.com/tridoc/tridoc-folder"}},[t._v("a native program")]),t._v(" for easy upload from a folder on your computer. It doesn’t, however, provide any graphical user interface (yet). ")]),a("p",[t._v(" If you’ve been using Evernote before, you can import your notebooks’ PDFs to tridoc with our "),a("a",{attrs:{href:"https://github.com/tridoc/tridoc-enex-importer"}},[t._v("Enex importer")]),t._v(". ")]),a("v-btn",{attrs:{block:"",href:"https://github.com/tridoc/tridoc-cockpit"}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-github")]),t._v(" View the repository on Github ")],1)],1)],1)],1)},ot=[],st=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a)}(d["d"]);Object(u["a"])([Object(d["c"])("open")],st.prototype,"show",void 0),st=Object(u["a"])([Object(d["a"])({})],st);var lt=st,ct=lt,ut=(a("3be2"),Object(h["a"])(ct,it,ot,!1,null,"e50489c0",null)),dt=ut.exports;A()(ut,{VAppBar:R["a"],VBtn:L["a"],VContainer:E["a"],VDivider:U["a"],VIcon:z["a"],VMain:H["a"],VNavigationDrawer:J["a"],VSpacer:Z["a"],VToolbarItems:et["a"],VToolbarTitle:et["b"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.error?a("v-card",{staticClass:"elevation-0 mt-3 pa-3",attrs:{color:t.color,dark:""}},[a("v-row",{staticClass:"ma-0 nowrap"},[a("div",[a("strong",[t._v(t._s(t.title))]),a("br"),a("span",[t._v(t._s(t.message))])]),a("v-spacer"),a("div",{staticClass:"vert"},[a("v-btn",{attrs:{color:t.color+" darken-3"},on:{click:t.close}},[t._v(" Dismiss ")])],1)],1)],1):t._e()},pt=[],mt=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a,[{key:"title",get:function(){return null!==this.error?this.error.title||"An Error Occured":"..."}},{key:"message",get:function(){return null!==this.error?this.error.message||"Unknown error":"..."}},{key:"color",get:function(){return null!==this.error?this.error.color||"error":"..."}}]),a}(d["d"]);Object(u["a"])([Object(d["b"])()],mt.prototype,"error",void 0),Object(u["a"])([Object(d["b"])()],mt.prototype,"close",void 0),mt=Object(u["a"])([Object(d["a"])({})],mt);var ht=mt,ft=ht,gt=(a("df06"),a("b0af")),bt=Object(h["a"])(ft,vt,pt,!1,null,"6c9ff424",null),yt=bt.exports;A()(bt,{VBtn:L["a"],VCard:gt["a"],VRow:K["a"],VSpacer:Z["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{fullscreen:t.$vuetify.breakpoint.smAndDown,persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{block:"",noutlined:"",ntext:"",color:"primary"}},r),[a("v-icon",{attrs:{left:""}},[t._v("mdi-tag-plus")]),t._v(" Create Tag ")],1)]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Create Tag")])]),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{outlined:"",rules:t.labelRules,label:"Label",required:""},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-radio-group",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("v-radio",{attrs:{value:"simple"},scopedSlots:t._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-tag")]),t._v(" Not parameterizable ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"decimal"},scopedSlots:t._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-pound")]),t._v(" Parameterizable with number / decimal ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"date"},scopedSlots:t._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-calendar")]),t._v(" Parameterizable with date ")]},proxy:!0}])})],1)],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:t.clear}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"secondary darken-1",text:""},on:{click:function(e){t.show=!1}}},[t._v("Close")]),a("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},kt=[],wt=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.show=!1,t.valid=!1,t.label="",t.type="simple",t.labelRules=[function(t){return!!t||"Label is required"},function(t){return!/\s|\/|\\|#|"|'|,|;|:|\?/.test(t)||"The label must not contain any of the following: whitespace / \\ # \" ' , ; : ?"},function(t){return!/^[.]{1,2}$/.test(t)||"The label must not equal . (single dot) or .. (double dot)"}],t}return Object(s["a"])(a,[{key:"clear",value:function(){this.show=!1,this.label="",this.type="simple",this.$refs.form.resetValidation()}},{key:"save",value:function(){var t=this;this.$refs.form.validate();var e=this.$store.getters.server.server;e&&this.valid&&e.createTag(this.label,"simple"!==this.type?this.type:void 0).then((function(e){e.error?(t.$emit("error",e),t.clear()):(t.$emit("tagcreated"),t.clear())}))}}]),a}(d["d"]);wt=Object(u["a"])([Object(d["a"])({})],wt);var xt=wt,Ot=xt,jt=a("99d9"),Ct=a("169a"),$t=a("67b6"),Vt=a("43a6"),St=Object(h["a"])(Ot,_t,kt,!1,null,null,null),Dt=St.exports;A()(St,{VBtn:L["a"],VCard:gt["a"],VCardActions:jt["a"],VCardText:jt["c"],VCardTitle:jt["d"],VCol:I["a"],VContainer:E["a"],VDialog:Ct["a"],VForm:F["a"],VIcon:z["a"],VRadio:$t["a"],VRadioGroup:Vt["a"],VRow:K["a"],VSpacer:Z["a"],VTextField:tt["a"]});var Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"my-2",attrs:{outlined:""}},[a("div",{staticClass:"top"},[a("div",{staticClass:"label ml-2"},[t._v(t._s(t.tag.label))]),a("v-spacer"),a("div",{staticClass:"buttons"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ma-1",attrs:{icon:"",small:"",color:"red accent-1"},on:{click:t.askDeleteTag}},"v-btn",n,!1),r),[a("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1)]}}])},[a("small",[t._v("Delete this tag")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"my-1",attrs:{icon:"",small:"",color:-1!==t.status[0].indexOf(t.tag.label)?"primary":""},on:{click:t.includeTag}},"v-btn",n,!1),r),[a("v-icon",[t._v(t._s(-1!==t.status[0].indexOf(t.tag.label)?"mdi-checkbox-marked":"mdi-checkbox-outline"))])],1)]}}])},[a("small",[t._v("Show only Documents with this tag")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"my-1 mr-1",attrs:{icon:"",small:"",color:-1!==t.status[1].indexOf(t.tag.label)?"primary":""},on:{click:t.excludeTag}},"v-btn",n,!1),r),[a("v-icon",[t._v(t._s(-1!==t.status[1].indexOf(t.tag.label)?"mdi-close-box":"mdi-close-box-outline"))])],1)]}}])},[a("small",[t._v("Show only Documents without this tag")])])],1)],1),t.tag["type-icon"]?a("div",[t._l(t.status[2],(function(e,r){return a("range-input",{key:(e[3]?"y":"n")+"_"+r,attrs:{minimum:e[1],maximum:e[2],include:e[3],remove:t.removeRange,toggle:t.toggleRange,change:t.getDocuments,type:"mdi-pound"===t.tag["type-icon"]?"number":"date"},on:{"update:minimum":function(a){return t.$set(e,1,a)},"update:maximum":function(a){return t.$set(e,2,a)},"update:include":function(a){return t.$set(e,3,a)}}})})),a("v-divider"),a("v-btn",{attrs:{text:"",small:"",block:""},on:{click:t.addRange}},[a("v-icon",{attrs:{small:"",left:""}},[t._v(t._s(t.tag["type-icon"]))]),t._v(" Add Range Filter ")],1)],2):t._e()])},Pt=[],Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-divider"),"number"===t.type?a("div",{staticClass:"rangerow mx-2 mt-2"},[a("v-text-field",{attrs:{label:"From",outlined:"",dense:"","hide-details":"auto",type:"number"},model:{value:t.min,callback:function(e){t.min=e},expression:"min"}}),a("v-text-field",{attrs:{label:"To",outlined:"",dense:"","hide-details":"auto",type:"number"},model:{value:t.max,callback:function(e){t.max=e},expression:"max"}})],1):a("div",{staticClass:"rangerow mx-2 mt-2"},[a("v-menu",{ref:"minMenu",attrs:{"close-on-content-click":!1,"return-value":t.min,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.min=e},"update:return-value":function(e){t.min=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"From",outlined:"",dense:"","hide-details":"auto",rules:t.dateRules},on:{change:function(e){t.minDate=t.min||""}},model:{value:t.min,callback:function(e){t.min=e},expression:"min"}},"v-text-field",n,!1),r))]}}]),model:{value:t.minMenu,callback:function(e){t.minMenu=e},expression:"minMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.minDate,callback:function(e){t.minDate=e},expression:"minDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.minMenu=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.minMenu.save(t.minDate)}}},[t._v(" OK ")])],1)],1),a("v-menu",{ref:"maxMenu",attrs:{"close-on-content-click":!1,"return-value":t.max,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.max=e},"update:return-value":function(e){t.max=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"To",outlined:"",dense:"","hide-details":"auto",rules:t.dateRules},on:{change:function(e){t.maxDate=t.max||""}},model:{value:t.max,callback:function(e){t.max=e},expression:"max"}},"v-text-field",n,!1),r))]}}]),model:{value:t.maxMenu,callback:function(e){t.maxMenu=e},expression:"maxMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.maxDate,callback:function(e){t.maxDate=e},expression:"maxDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.maxMenu=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.maxMenu.save(t.maxDate)}}},[t._v(" OK ")])],1)],1)],1),a("div",{staticClass:"bottom"},[a("v-btn",{staticClass:"ma-1 ml-2",attrs:{text:"",small:""},on:{click:function(){return t.remove(t.min,t.max,t.inc)}}},[t._v("Remove")]),a("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(){return t.toggle(t.min,t.max,t.inc)}}},[a("v-icon",[t._v(t._s(t.inc?"mdi-checkbox-outline":"mdi-close-box-outline"))])],1)],1)],1)},At=[],Rt=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.minMenu=!1,t.maxMenu=!1,t.minDate="",t.maxDate="",t.dateRules=[function(t){return!t||/^\d{4}-\d{2}-\d{2}$/.test(t)&&!isNaN(new Date(t).getTime())||"Must be a date of format YYYY-MM-DD"}],t}return Object(s["a"])(a,[{key:"changeM",value:function(){this.change()}}]),a}(d["d"]);Object(u["a"])([Object(d["c"])("minimum")],Rt.prototype,"min",void 0),Object(u["a"])([Object(d["c"])("maximum")],Rt.prototype,"max",void 0),Object(u["a"])([Object(d["c"])("include")],Rt.prototype,"inc",void 0),Object(u["a"])([Object(d["b"])()],Rt.prototype,"type",void 0),Object(u["a"])([Object(d["b"])()],Rt.prototype,"remove",void 0),Object(u["a"])([Object(d["b"])()],Rt.prototype,"toggle",void 0),Object(u["a"])([Object(d["b"])()],Rt.prototype,"change",void 0),Object(u["a"])([Object(d["e"])("min"),Object(d["e"])("max")],Rt.prototype,"changeM",null),Rt=Object(u["a"])([Object(d["a"])({})],Rt);var Lt=Rt,It=Lt,Et=(a("de56"),a("2e4b")),Ut=Object(h["a"])(It,Mt,At,!1,null,"22471964",null),Ft=Ut.exports;A()(Ut,{VBtn:L["a"],VDatePicker:Et["a"],VDivider:U["a"],VIcon:z["a"],VMenu:Y["a"],VSpacer:Z["a"],VTextField:tt["a"]});var zt=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(o["a"])(this,a),e.apply(this,arguments)}return Object(s["a"])(a,[{key:"status",get:function(){var t=this,e=this.dnsearch.tags.filter((function(e){return e[0]===t.tag.label&&(void 0===e[1]||""===e[1])&&(void 0===e[2]||""===e[2])})).map((function(t){return t[0]})),a=this.dnsearch.nottags.filter((function(e){return e[0]===t.tag.label&&(void 0===e[1]||""===e[1])&&(void 0===e[2]||""===e[2])})).map((function(t){return t[0]})),r=this.dnsearch.tags.filter((function(e){return e[0]===t.tag.label})).map((function(t){return t[3]=!0,t})),n=this.dnsearch.nottags.filter((function(e){return e[0]===t.tag.label})).map((function(t){return t[3]=!1,t}));return[e,a,r.concat(n)]}},{key:"includeTag",value:function(){var t=this,e=this.dnsearch.nottags.findIndex((function(e){return e[0]===t.tag.label&&void 0===e[1]&&void 0===e[2]}));e>-1&&this.dnsearch.nottags.splice(e,1);var a=this.dnsearch.tags.findIndex((function(e){return e[0]===t.tag.label&&void 0===e[1]&&void 0===e[2]}));a>-1?this.dnsearch.tags.splice(a,1):this.dnsearch.tags.push([this.tag.label,void 0,void 0]),this.getDocuments()}},{key:"excludeTag",value:function(){var t=this,e=this.dnsearch.tags.findIndex((function(e){return e[0]===t.tag.label&&void 0===e[1]&&void 0===e[2]}));e>-1&&this.dnsearch.tags.splice(e,1);var a=this.dnsearch.nottags.findIndex((function(e){return e[0]===t.tag.label&&void 0===e[1]&&void 0===e[2]}));a>-1?this.dnsearch.nottags.splice(a,1):this.dnsearch.nottags.push([this.tag.label,void 0,void 0]),this.getDocuments()}},{key:"addRange",value:function(){this.dnsearch.tags.push([this.tag.label,void 0,void 0]),this.getDocuments()}},{key:"removeRange",value:function(t,e,a){a?this.dnsearch.tags.splice(this.dnsearch.tags.indexOf([this.tag.label,t,e]),1):this.dnsearch.nottags.splice(this.dnsearch.nottags.indexOf([this.tag.label,t,e]),1),this.getDocuments()}},{key:"toggleRange",value:function(t,e,a){a?(this.dnsearch.tags.splice(this.dnsearch.tags.indexOf([this.tag.label,t,e]),1),this.dnsearch.nottags.push([this.tag.label,t,e])):(this.dnsearch.nottags.splice(this.dnsearch.nottags.indexOf([this.tag.label,t,e]),1),this.dnsearch.tags.push([this.tag.label,t,e])),this.getDocuments()}},{key:"askDeleteTag",value:function(){confirm("Delete Tag “".concat(this.tag.label,"”?\nThis action cannot be undone."))&&(this.deleteTag(this.tag.label),this.reload())}}]),a}(d["d"]);Object(u["a"])([Object(d["b"])()],zt.prototype,"reload",void 0),Object(u["a"])([Object(d["b"])()],zt.prototype,"getDocuments",void 0),Object(u["a"])([Object(d["b"])()],zt.prototype,"error",void 0),Object(u["a"])([Object(d["b"])()],zt.prototype,"deleteTag",void 0),Object(u["a"])([Object(d["b"])()],zt.prototype,"tag",void 0),Object(u["a"])([Object(d["c"])("search")],zt.prototype,"dnsearch",void 0),zt=Object(u["a"])([Object(d["a"])({components:{RangeInput:Ft}})],zt);var qt=zt,Bt=qt,Nt=(a("f135"),Object(h["a"])(Bt,Tt,Pt,!1,null,"7ddea2dc",null)),Wt=Nt.exports;A()(Nt,{VBtn:L["a"],VCard:gt["a"],VDivider:U["a"],VIcon:z["a"],VSpacer:Z["a"],VTooltip:at["a"]});var Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.$store.state.viewSettings.grid?a("v-list",{staticClass:"grid py-0"},t._l(t.docs,(function(e){return a("v-card",{key:e.identifier,staticClass:"pa-0 v-list-item v-list-item--link",attrs:{outlined:"",to:"./doc/"+e.identifier+"?s="+t.$store.getters.server.url}},[a("thumbnail",{attrs:{id:e.identifier}}),a("v-divider"),a("v-card-title",{staticClass:"text-truncate"},[t._v(" "+t._s(e.title)+" "),e.title?t._e():a("i",[t._v("Untitled Document")])]),a("v-card-subtitle",{staticClass:"text-truncate"},[a("time-ago",{attrs:{datetime:e.created}},[t._v(" "+t._s(e.created)+" ")])],1),a("v-divider"),a("v-card-actions",[a("div",{staticClass:"cv flex-auto"},[e.comments&&e.comments.length?a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,i=r.attrs;return[a("span",t._g(t._b({staticClass:"mr-2 text--disabled"},"span",i,!1),n),[t._v(" "+t._s(e.comments.length)+" "),a("v-icon",{attrs:{disabled:""}},[t._v("mdi-comment-outline")])],1)]}}],null,!0)},[t._v(" "+t._s(e.comments.length)+" Comments ")]):t._e()],1),e.tags.length?a("div",{staticClass:"my-n2 no-expand cv",attrs:{cols:"auto"}},[a("div",{staticClass:"wrapper"},[".."===e.tags[0].label?a("v-progress-circular",{attrs:{indeterminate:"",color:t.$vuetify.theme.dark?"grey darken-3":"grey lighten-2"}}):t._l(e.tags,(function(e){return a("v-chip",{key:e.label+(e.parameter?e.parameter.value:""),staticClass:"mr-1",attrs:{label:"",small:t.$store.state.viewSettings.dense}},[a("span",[t._v(t._s(e.label))]),e.parameter?a("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}):t._e(),e.parameter?a("strong",["http://www.w3.org/2001/XMLSchema#decimal"===e.parameter.type?a("span",[t._v(t._s(e.parameter.value))]):a("local-time",{attrs:{datetime:e.parameter.value}},[t._v(t._s(e.parameter.value))])],1):t._e()],1)}))],2)]):t._e(),a("v-spacer"),t.$vuetify.breakpoint.smAndUp?a("v-tooltip",{staticClass:"cv ml-2",attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,i=r.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",loading:t.downloading[e.identifier],disabled:t.downloading[e.identifier]},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.download(e.identifier)}}},"v-btn",i,!1),n),[a("v-icon",[t._v("mdi-download")])],1)]}}],null,!0)},[t._v(" Download ")]):t._e()],1)],1)})),1):a("v-card",{attrs:{outlined:""}},[a("v-list",{staticClass:"py-0"},[t._l(t.docs,(function(e,r){return[a("v-list-item",{key:e.identifier,staticClass:"px-0",attrs:{to:"./doc/"+e.identifier+"?s="+t.$store.getters.server.url}},[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{staticClass:"ma-2 do-expand",attrs:{cols:"auto"}},[a("div",{staticClass:"text-truncate"},[t._v(" "+t._s(e.title)+" "),e.title?t._e():a("i",[t._v("Untitled Document")])])]),e.tags.length?a("v-col",{staticClass:"mr-2 no-expand cv",attrs:{cols:"auto"}},[a("div",{staticClass:"py-2 wrapper"},[a("v-spacer"),".."===e.tags[0].label?a("v-progress-circular",{attrs:{indeterminate:"",color:t.$vuetify.theme.dark?"grey darken-3":"grey lighten-2"}}):t._l(e.tags,(function(e){return a("v-chip",{key:e.label+(e.parameter?e.parameter.value:""),staticClass:"mr-1",attrs:{label:"",small:t.$store.state.viewSettings.dense}},[a("span",[t._v(t._s(e.label))]),e.parameter?a("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}):t._e(),e.parameter?a("strong",["http://www.w3.org/2001/XMLSchema#decimal"===e.parameter.type?a("span",[t._v(t._s(e.parameter.value))]):a("local-time",{attrs:{datetime:e.parameter.value}},[t._v(t._s(e.parameter.value))])],1):t._e()],1)}))],2)]):t._e(),a("v-col",{staticClass:"ma-2 cv",attrs:{cols:"auto"}},[a("div",[a("time-ago",{staticClass:"mr-2",staticStyle:{"white-space":"nowrap"},attrs:{datetime:e.created,format:t.$vuetify.breakpoint.smAndUp||"micro"}},[t._v(" "+t._s(e.created)+" ")]),e.comments&&e.comments.length?a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,i=r.attrs;return[a("span",t._g(t._b({staticClass:"mr-2 text--disabled"},"span",i,!1),n),[t._v(" "+t._s(e.comments.length)+" "),a("v-icon",{attrs:{disabled:""}},[t._v("mdi-comment-outline")])],1)]}}],null,!0)},[t._v(" "+t._s(e.comments.length)+" Comments ")]):t._e(),t.$vuetify.breakpoint.smAndUp?a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,i=r.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",loading:t.downloading[e.identifier],disabled:t.downloading[e.identifier]},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.download(e.identifier)}}},"v-btn",i,!1),n),[a("v-icon",[t._v("mdi-download")])],1)]}}],null,!0)},[t._v(" Download ")]):t._e(),t.$vuetify.breakpoint.smAndUp?a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(r){var n=r.on,i=r.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",color:"primary",href:"./doc/"+e.identifier+"?s="+t.$store.getters.server.url},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},"v-btn",i,!1),n),[a("v-icon",[t._v("mdi-file-eye-outline")])],1)]}}],null,!0)},[t._v(" Open ")]):t._e()],1)])],1)],1),r<t.docs.length-1?a("v-divider",{key:r}):t._e()]}))],2)],1)],1)},Ht=[],Yt=(a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-sheet",{staticClass:"thumb",style:t.$store.state.viewSettings.dense?"height : 40px;":"height: 120px;",attrs:{color:t.$vuetify.theme.dark?"grey darken-3":"grey lighten-2"}},[t.loading?a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey"}})],1):t.url?a("img",{staticClass:"elevation-4",attrs:{src:t.url}}):a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-sheet",t._g(t._b({staticClass:"noimg",attrs:{elevation:"4",tile:"",color:t.$vuetify.theme.dark?"grey darken-4":"white"}},"v-sheet",n,!1),r),[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-icon",{attrs:{color:"grey"}},[t._v("mdi-image-broken-variant")])],1)],1)]}}])},[t._v(" Failed to load thumbnail ")])],1)}),Jt=[],Xt=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.url="",t.loading=!0,t}return Object(s["a"])(a,[{key:"mounted",value:function(){var t=this,e=(this.$store.getters.server.url.startsWith("https://")||this.$store.getters.server.url.startsWith("http://")?this.$store.getters.server.url:"https://"+this.$store.getters.server.url)+"/doc/"+this.id+"/thumb",a={headers:{Authorization:this.$store.getters.server.server.headers.get("Authorization")}};fetch(e,a).then((function(t){return t.blob()})).then((function(e){t.loading=!1,t.url=URL.createObjectURL(e)})).catch((function(){t.loading=!1}))}}]),a}(d["d"]);Object(u["a"])([Object(d["b"])()],Xt.prototype,"id",void 0),Xt=Object(u["a"])([Object(d["a"])({})],Xt);var Kt=Xt,Zt=Kt,Qt=(a("82cf"),a("8dd9")),te=Object(h["a"])(Zt,Yt,Jt,!1,null,"f599d33e",null),ee=te.exports;A()(te,{VIcon:z["a"],VProgressCircular:X["a"],VRow:K["a"],VSheet:Qt["a"],VTooltip:at["a"]});var ae=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.downloading={},t}return Object(s["a"])(a,[{key:"download",value:function(t){var e=this;d["d"].set(this.downloading,t,!0);var a=(this.$store.getters.server.url.startsWith("https://")||this.$store.getters.server.url.startsWith("http://")?this.$store.getters.server.url:"https://"+this.$store.getters.server.url)+"/doc/"+t,r={headers:{Authorization:this.$store.getters.server.server.headers.get("Authorization")}};fetch(a,r).then((function(t){return t.blob()})).then((function(a){var r;d["d"].set(e.downloading,t,!1);var n=document.createElement("a");n.href=URL.createObjectURL(a),n.download=(null===(r=e.docs.find((function(e){return e.identifier===t})))||void 0===r?void 0:r.title)||t,n.click()}))}}]),a}(d["d"]);Object(u["a"])([Object(d["b"])()],ae.prototype,"docs",void 0),Object(u["a"])([Object(d["b"])()],ae.prototype,"list",void 0),Object(u["a"])([Object(d["b"])()],ae.prototype,"loading",void 0),ae=Object(u["a"])([Object(d["a"])({components:{Thumbnail:ee}})],ae);var re=ae,ne=re,ie=(a("ff85"),a("cc20")),oe=Object(h["a"])(ne,Gt,Ht,!1,null,"9417b180",null),se=oe.exports;A()(oe,{VBtn:L["a"],VCard:gt["a"],VCardActions:jt["a"],VCardSubtitle:jt["b"],VCardTitle:jt["d"],VChip:ie["a"],VCol:I["a"],VDivider:U["a"],VIcon:z["a"],VList:B["a"],VListItem:N["a"],VProgressCircular:X["a"],VRow:K["a"],VSpacer:Z["a"],VTooltip:at["a"]});var le=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t,r;return Object(o["a"])(this,a),r=e.apply(this,arguments),r.welcome=!1,r.error=null,r.settingsOpen=!1,r.helpOpen=!1,r.search={text:"",tags:[],nottags:[]},r.drawer=null,r.docs=[],r.count=0,r.headers=[{text:"Title",value:"title"},{text:"Tags",value:"tags"},{text:"Created",value:"created",align:"end"},{text:"",value:"actions",width:1}],r.loading=!1,r.options={page:null!==(t=r.page)&&void 0!==t?t:1,itemsPerPage:10},r.uploadDocs=[],r.uploadHeaders=[{text:"Name",value:"file.name"},{text:"",value:"actions",align:"end"}],r.tags=[],r}return Object(s["a"])(a,[{key:"clearTags",value:function(){this.search.tags=[],this.search.nottags=[],this.getDocuments()}},{key:"clearSearch",value:function(){this.search.tags=[],this.search.nottags=[],this.search.text="",this.getDocuments()}},{key:"paginationFirst",value:function(){this.changePage(1)}},{key:"paginationPrev",value:function(){this.changePage(this.options.page-1)}},{key:"paginationNext",value:function(){this.changePage(this.options.page+1)}},{key:"paginationLast",value:function(){this.changePage(Math.ceil(this.count/this.options.itemsPerPage))}},{key:"changePage",value:function(t){this.options.page=Math.max(1,Math.min(t,Math.ceil(this.count/this.options.itemsPerPage))),this.$router.push({name:"home",query:{p:t.toString()}}),this.$nextTick().then(this.getDocuments)}},{key:"docscounter",value:function(){return"".concat(Math.max((this.options.page-1)*this.options.itemsPerPage+1,0)," to ").concat(Math.min(this.options.page*this.options.itemsPerPage,this.count)," of ").concat(this.count)}},{key:"pagecounter",value:function(){return"".concat(this.options.page," of ").concat(Math.ceil(this.count/this.options.itemsPerPage))}},{key:"openDocumentView",value:function(t){this.$router.push({name:"doc",params:{id:t},query:{s:this.$store.getters.server.url}})}},{key:"getDocuments",value:function(){var t,e=this;this.search.text=this.search.text||"";var a,r,n=null===(t=this.$store.getters.server)||void 0===t?void 0:t.server;n?(this.welcome=!1,this.loading=!0,n.countDocuments(this.search.text,this.search.tags,this.search.nottags).then((function(t){"number"===typeof t?(e.count=t,e.options.page=Math.min(Math.max(e.options.page,1),Math.ceil(e.count/e.options.itemsPerPage)),0===t&&(e.loading=!1)):e.error=Object(j["a"])({},t)})),this.options.itemsPerPage>0&&(a=this.options.itemsPerPage,r=(this.options.page-1)*a),n.getDocuments(this.search.text,this.search.tags,this.search.nottags,a,r).then((function(t){"error"in t?(e.error=Object(j["a"])({},t),e.loading=!1):(e.docs=t.map((function(t){var e=t.identifier,a=t.title,r=t.created;return a=a||"",{identifier:e,title:a,created:r,tags:[{label:".."}]}})),e.docs.forEach((function(t){var a=n.getTags(t.identifier).then((function(a){"error"in a?e.error=Object(j["a"])({title:a.error},a):t.tags=a})),r=n.getComments(t.identifier).then((function(a){"error"in a?e.error=Object(j["a"])({title:a.error},a):t.comments=a}));Promise.allSettled([a,r]).then((function(){e.loading=!1}))})))}))):(this.welcome=!0,this.loading=!1)}},{key:"updateDoc",value:function(t){this.docs.splice(this.docs.findIndex((function(e){return e.identifier===t.identifier})),1,t)}},{key:"addFile",value:function(t){var e,a=this,r=null===(e=t.dataTransfer)||void 0===e?void 0:e.files;r&&Object(O["a"])(r).forEach((function(t){"application/pdf"===t.type&&a.uploadDocs.push({loading:!1,file:t})}))}},{key:"addFileInput",value:function(t){var e=this,a=t.target.files;a&&(Object(O["a"])(a).forEach((function(t){"application/pdf"===t.type&&e.uploadDocs.push({loading:!1,file:t})})),t.target.value="",t.target.files=null)}},{key:"uploadAll",value:function(){this.uploadDocs.forEach(this.uploadDocument)}},{key:"uploadDocument",value:function(t){var e=this,a=this.$store.getters.server.server;a&&(t.loading=!0,a.uploadFile(t.file).then((function(r){"error"in r?e.error={title:"Could upload document",message:r.error}:a.setDocumentTitle(r.location.substring(r.location.lastIndexOf("/")+1),t.file.name.replace(/\.pdf$/,"")).then((function(a){"string"!==typeof a&&a.error&&(e.error={title:"Could not set title",message:a.error}),e.reload(),e.removeUploadDocument(t)}))}),(function(t){e.error={title:t.error||t,message:t.message||t}})).finally((function(){t.loading=!1})))}},{key:"removeUploadDocument",value:function(t){this.uploadDocs=this.uploadDocs.filter((function(e){return e!==t}))}},{key:"deleteTag",value:function(t){var e=this,a=this.$store.getters.server.server;a&&a.deleteTag(t).then((function(t){t.error?e.error=Object(j["a"])(Object(j["a"])({},t),{},{message:t.error}):e.reload()}))}},{key:"serverchange",value:function(t){var e=t.url,a=t.password;this.$store.commit("selectServer",{url:e,password:a}),this.store(),this.reload()}},{key:"serverremove",value:function(t){this.$store.commit("removeServer",{index:t}),this.store(),this.reload()}},{key:"reload",value:function(){var t,e=this;this.reset(),this.getDocuments();var a=null===(t=this.$store.getters.server)||void 0===t?void 0:t.server;a&&a.getTags().then((function(t){"error"in t?e.error=Object(j["a"])({title:t.error},t):(e.tags=t.map((function(t){var e={icon:"mdi-tag",label:t.label,"type-icon":""};if(t.parameter)switch(t.parameter.type){case"http://www.w3.org/2001/XMLSchema#decimal":e["type-icon"]="mdi-pound";break;case"http://www.w3.org/2001/XMLSchema#date":e["type-icon"]="mdi-calendar";break;default:break}return e})),e.tags.sort((function(t,e){var a=t.label.toUpperCase(),r=e.label.toUpperCase();return a<r?-1:a>r?1:0})))}),(function(t){t instanceof Error?e.error={title:"A "+t.name+" occurred",message:t.message}:e.error=Object(j["a"])({message:t},t)}))}},{key:"reset",value:function(){this.tags=[],this.docs=[]}},{key:"store",value:function(){var t;localStorage.setItem("currentserver",(null===(t=this.$store.state.currentServer)||void 0===t?void 0:t.toString())||""),localStorage.setItem("servers",JSON.stringify(this.$store.state.servers.map((function(t){var e=t.password,a=t.url;return{password:e,url:a}}))))}},{key:"created",value:function(){this.reload()}},{key:"onError",value:function(t){var e=t.title,a=t.message;this.error={title:e,message:a}}}]),a}(d["d"]);Object(u["a"])([Object(d["b"])()],le.prototype,"page",void 0),le=Object(u["a"])([Object(d["a"])({components:{SettingsDrawer:nt,HelpDrawer:dt,ErrorDialog:yt,TagCreator:Dt,TagFilter:Wt,DocumentList:se}})],le);var ce=le,ue=ce,de=(a("cc29"),a("7496")),ve=a("5bc1"),pe=a("8fea"),me=a("8e36"),he=a("e0c7"),fe=Object(h["a"])(ue,w,x,!1,null,"01b6895b",null),ge=fe.exports;A()(fe,{VApp:de["a"],VAppBar:R["a"],VAppBarNavIcon:ve["a"],VBtn:L["a"],VCard:gt["a"],VCardText:jt["c"],VCardTitle:jt["d"],VCol:I["a"],VContainer:E["a"],VDataTable:pe["a"],VDivider:U["a"],VIcon:z["a"],VList:B["a"],VListItem:N["a"],VListItemContent:G["a"],VListItemSubtitle:G["b"],VMain:H["a"],VNavigationDrawer:J["a"],VProgressLinear:me["a"],VRow:K["a"],VSpacer:Z["a"],VSubheader:he["a"],VTextField:tt["a"],VToolbarTitle:et["b"],VTooltip:at["a"]});var be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{staticClass:"py-0",attrs:{app:"",color:"primary"}},[a("v-toolbar",{staticClass:"col-md-5 col-12 pa-0",attrs:{flat:"",dark:"",color:"primary"}},[a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-app-bar-nav-icon",t._g(t._b({on:{click:function(e){e.stopPropagation(),t.$router.go(-1),t.$router.push("/")}}},"v-app-bar-nav-icon",n,!1),r),[a("v-icon",[t._v("mdi-arrow-left")])],1)]}}])},[t._v(" Go Back ")]),a("v-toolbar-title",[t.meta?a("span",[t._v(t._s(t.meta.title))]):t._e()]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:"",loading:t.downloading,disabled:t.downloading},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.download(e)}}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-download")])],1)]}}])},[t._v(" Download ")]),t.meta?a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.deleteDocument(t.id)}}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-delete")])],1)]}}],null,!1,1478812804)},[t._v(" Delete This Document ")]):t._e(),a("v-progress-linear",{attrs:{active:t.loadingMeta,indeterminate:"",absolute:"",bottom:"",color:"white"}})],1),t.$vuetify.breakpoint.mdAndUp?a("v-toolbar",{staticClass:"col-7 pa-0",attrs:{flat:""}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.scaleDown}},[a("v-icon",[t._v("mdi-magnify-minus-outline")])],1),a("v-text-field",{staticClass:"narrow mx-1",attrs:{"hide-details":"",dense:"",right:"","single-line":"",outlined:"",value:t.getScale(),suffix:"%",type:"number",step:"10"},on:{input:t.setScale}}),a("v-btn",{attrs:{icon:""},on:{click:t.scaleOff}},[a("v-icon",[t._v("mdi-arrow-expand-horizontal")])],1),a("v-btn",{attrs:{icon:""},on:{click:t.scaleUp}},[a("v-icon",[t._v("mdi-magnify-plus-outline")])],1),a("v-spacer"),t._v(" "+t._s(t.numPages)+" Pages "),a("v-progress-linear",{attrs:{indeterminate:0===t.numPages||0===t.loading,active:t.loading<t.numPages,value:t.loading/t.numPages*100,absolute:"",bottom:""}})],1):t._e()],1),a("v-main",{class:t.$vuetify.breakpoint.mdAndUp?"":"expand",attrs:{app:""}},[a("v-row",{staticClass:"layout ma-0"},[a("v-col",{class:t.$vuetify.breakpoint.mdAndUp?"col":"",attrs:{cols:"12",md:"5"}},[a("div",{staticClass:"pb-3"},[a("code",[t._v(t._s(t.id))]),t._v(" "),a("code",[t.meta?a("time-ago",{attrs:{datetime:t.meta.created}},[t._v(t._s(t.meta.created))]):t._e()],1)]),t.meta?a("div",[a("v-text-field",{attrs:{outlined:"",label:"Title"},on:{change:t.updateTitle},model:{value:t.meta.title,callback:function(e){t.$set(t.meta,"title",e)},expression:"meta.title"}}),a("tag-adder",{attrs:{id:t.id,meta:t.meta},on:{"update:meta":[function(e){t.meta=e},t.reloadTags]}}),a("comments-list",{attrs:{id:t.id,meta:t.meta},on:{"update:meta":function(e){t.meta=e}}})],1):t._e()]),t.$vuetify.breakpoint.smAndDown?a("v-toolbar",{staticClass:"tools",attrs:{short:""}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.scaleDown}},[a("v-icon",[t._v("mdi-magnify-minus-outline")])],1),a("v-text-field",{staticClass:"narrow",attrs:{"hide-details":"",dense:"","single-line":"",outlined:"",value:t.getScale(),suffix:"%",type:"number",step:"5"},on:{input:t.setScale}}),a("v-btn",{attrs:{icon:""},on:{click:t.scaleOff}},[a("v-icon",[t._v("mdi-arrow-expand-horizontal")])],1),a("v-btn",{attrs:{icon:""},on:{click:t.scaleUp}},[a("v-icon",[t._v("mdi-magnify-plus-outline")])],1),a("v-spacer"),t._v(" "+t._s(t.numPages)+" Pages "),a("v-progress-linear",{attrs:{indeterminate:0===t.numPages||0===t.loading,active:t.loading<t.numPages,value:t.loading/t.numPages*100,absolute:"",bottom:""}})],1):t._e(),a("v-col",{class:t.$vuetify.breakpoint.mdAndUp?"col pa-0":"pa-0",attrs:{cols:"12",md:"7"}},[a("v-sheet",{class:(t.$vuetify.breakpoint.mdAndUp?"col ":"")+(t.resize?"y pa-0":"x y pa-0"),attrs:{color:this.$vuetify.theme.dark?"grey darken-3":"grey lighten-2"}},[a("div",{class:t.resize?"px-3":"fit px-3"},t._l(t.numPages,(function(e){return a("pdf",{key:e,staticClass:"pdf",attrs:{src:t.pdfsrc(),id:e,page:e,scale:t.scale,resize:t.resize,annotation:""},on:{"update:scale":function(e){t.scale=e},loading:t.loadingChange}})})),1)])],1)],1)],1),a("v-dialog",{attrs:{transition:"dialog-top-transition",persistent:"","max-width":"600px"},model:{value:t.dialog.open,callback:function(e){t.$set(t.dialog,"open",e)},expression:"dialog.open"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.error?"An Error Occurred":"Set Server and Password"))])]),a("v-card-text",{staticClass:"pb-0"},[a("v-alert",{staticClass:"ma-1",attrs:{outlined:"",type:"error"}},[a("v-simple-table",{staticStyle:{color:"inherit"},attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",t._l(t.error,(function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(r))]),a("td",[t._v(t._s(e))])])})),0)]},proxy:!0}])})],1),a("v-container",[a("v-form",{ref:"form",model:{value:t.dialog.valid,callback:function(e){t.$set(t.dialog,"valid",e)},expression:"dialog.valid"}},[a("v-row",{staticClass:"mx-n3",attrs:{dense:""}},[a("v-col",[a("v-text-field",{attrs:{outlined:"",rules:t.dialog.urlRules,label:"Server URL",required:""},model:{value:t.dialog.url,callback:function(e){t.$set(t.dialog,"url",e)},expression:"dialog.url"}})],1),a("v-col",[a("v-text-field",{attrs:{outlined:"",type:"password",rules:t.dialog.pwRules,label:"Password",required:""},model:{value:t.dialog.pw,callback:function(e){t.$set(t.dialog,"pw",e)},expression:"dialog.pw"}})],1)],1)],1),a("v-row",{staticClass:"mx-n3",attrs:{dense:""}},[a("v-col",[t._v(" "+t._s(t.error?"A different server URL or password may be":t.$route.query.s?"A password is":"Server URL and password are")+" required to view this document. ")])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:function(e){e.stopPropagation(),t.$router.go(-1),t.$router.push("/")}}},[t._v(" Go Back ")]),a("v-btn",{attrs:{color:"primary",disabled:!t.dialog.valid||t.loadingMeta,loading:t.loadingMeta},on:{click:t.closeDialog}},[t._v(" Save ")])],1)],1)],1)],1)},ye=[],_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{outlined:""}},[a("v-expansion-panels",{attrs:{flat:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("v-expansion-panel",[a("v-expansion-panel-header",{scopedSlots:t._u([{key:"default",fn:function(){return[t.docMeta.tags.length?".."!==t.docMeta.tags[0].label?a("div",{staticClass:"ma-n1 overflow"},t._l(t.docMeta.tags,(function(e){return a("v-chip",{key:e.label+(e.parameter?e.parameter.value:""),staticClass:"ma-1",attrs:{label:"",close:""},on:{"click:close":function(a){return t.removeTag(e.label)}}},[t._v(" "+t._s(e.label)+" "),e.parameter?a("v-divider",{staticClass:"mx-3",attrs:{vertical:""}}):t._e(),e.parameter?a("strong",["http://www.w3.org/2001/XMLSchema#decimal"===e.parameter.type?a("span",[t._v(t._s(e.parameter.value))]):a("local-time",{attrs:{datetime:e.parameter.value}},[t._v(t._s(e.parameter.value))])],1):t._e()],1)})),1):t._e():a("div",[a("v-chip",{attrs:{label:""}},[a("v-icon",{staticClass:"mr-3",attrs:{small:""}},[t._v("mdi-tag-off-outline")]),t._v(" Document has no tags ")],1)],1)]},proxy:!0}])}),a("v-expansion-panel-content",[a("v-divider"),a("h2",{staticClass:"my-3 text-overline"},[t._v(" Available Tags: ")]),a("div",{staticClass:"ma-n1 overflow"},t._l(t.allTags,(function(e){return a("v-chip",{key:e.label,staticClass:"ma-1",attrs:{label:""},on:{click:function(a){t.label=e.label}}},[e.parameter?a("v-icon",{staticClass:"mr-3",attrs:{small:""}},[t._v(t._s("http://www.w3.org/2001/XMLSchema#decimal"===e.parameter.type?"mdi-pound":"mdi-calendar"))]):t._e(),a("span",[t._v(t._s(e.label))])],1)})),1),a("h2",{staticClass:"my-3 text-overline"},[t._v(" Add Tag: ")]),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",{staticClass:"pa-0"},[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{outlined:"",rules:t.labelRules,label:"Label",required:""},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{id:"dateField",outlined:"",rules:t.valRules,label:"Value",required:"",autocomplete:"off",disabled:"simple"===this.type,messages:"simple"===this.type?"Value will be ignored for simple tags":""},on:{input:function(e){t.valDate=!0===t.valRules[1](t.value)?t.value:""}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),"date"===this.type?a("v-menu",{ref:"dateMenu",attrs:{"open-on-focus":"","close-on-content-click":!1,transition:"scale-transition","offset-y":"",bottom:"","min-width":"290px",activator:"#dateField"},model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[a("v-date-picker",{attrs:{"show-current":!1,scrollable:""},on:{input:function(e){t.value=t.valDate}},model:{value:t.valDate,callback:function(e){t.valDate=e},expression:"valDate"}})],1):t._e()],1)],1),a("v-row",[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-radio-group",{staticClass:"mt-0",attrs:{disabled:t.fixed,"hide-details":""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("v-radio",{attrs:{value:"simple"},scopedSlots:t._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-tag")]),t._v(" Not parameterizable ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"decimal"},scopedSlots:t._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-pound")]),t._v(" Parameterizable with number / decimal ")]},proxy:!0}])}),a("v-radio",{attrs:{value:"date"},scopedSlots:t._u([{key:"label",fn:function(){return[a("v-icon",{attrs:{small:"",left:""}},[t._v("mdi-calendar")]),t._v(" Parameterizable with date ")]},proxy:!0}])})],1)],1)],1),a("v-row",[a("v-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[a("v-btn",{staticClass:"mr-2",attrs:{color:"secondary",text:""},on:{click:t.clear}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.save}},[t._v("Add")])],1)],1)],1)],1)],1)],1)],1)],1)},ke=[],we=a("c7eb"),xe=a("1da1"),Oe=(a("c7cd"),function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.allTags=[],t.show=-1,t.valid=!0,t.label="",t.type="simple",t.value="",t.valDate="",t.fixed=!1,t.dateMenu=!1,t.labelRules=[function(t){return!!t||"Label is required"},function(t){return!/\s|\/|\\|#|"|'|,|;|:|\?/.test(t)||"The label must not contain any of the following: whitespace / \\ # \" ' , ; : ?"},function(t){return!/^[.]{1,2}$/.test(t)||"The label must not equal . (single dot) or .. (double dot)"}],t.valRules=[function(e){return"decimal"===t.getType()&&!isNaN(+e)&&!!e||"decimal"!==t.getType()||"Must be a number"},function(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)&&!isNaN(new Date(e).getTime())||"date"!==t.getType()||"Must be a date of format YYYY-MM-DD"}],t}return Object(s["a"])(a,[{key:"change",value:function(t){var e=this.allTags.find((function(e){return e.label===t}));e?(this.fixed=!0,this.type=e.parameter?"http://www.w3.org/2001/XMLSchema#decimal"===e.parameter.type?"decimal":"date":"simple"):this.fixed=!1}},{key:"getType",value:function(){return this.type}},{key:"typeChanged",value:function(){this.value="",this.$refs.form.resetValidation()}},{key:"clear",value:function(){this.label="",this.type="simple",this.$refs.form.resetValidation()}},{key:"save",value:function(){var t=Object(xe["a"])(Object(we["a"])().mark((function t(){var e,a=this;return Object(we["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.valid=this.$refs.form.validate(),e=this.$store.getters.server.server,!e||!this.valid){t.next=19;break}return t.next=5,this.reloadTags();case 5:if(-1===(this.docMeta.tags||[]).findIndex((function(t){return t.label===a.label}))){t.next=10;break}return alert("Tag has already been added to the document"),t.abrupt("return");case 10:if(-1!==this.allTags.findIndex((function(t){return t.label===a.label}))){t.next=18;break}if(!confirm("This tag doesn’t exist yet. Do you want to create it?")){t.next=16;break}return t.next=14,e.createTag(this.label,"simple"!==this.type?this.type:void 0).then((function(t){"error"in t&&console.error(t)}));case 14:t.next=18;break;case 16:return this.reload(),t.abrupt("return");case 18:e.addTag(this.id,this.label,"simple"!==this.type?this.type:void 0,"simple"!==this.type?this.value:void 0).then((function(t){t.error?(a.$emit("error",t),a.reload()):(a.$emit("tagadded"),a.reload(),a.$refs.form.reset())}));case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeTag",value:function(t){var e=this.$store.getters.server.server;e&&confirm('Do you want to remove tag "'.concat(t,'" from the Document?\nThis Action cannot be undone'))&&e.removeTag(this.id,t).then(this.reload)}},{key:"reloadTags",value:function(){var t=this,e=this.$store.getters.server.server;if(e)return e.getTags().then((function(e){"error"in e||(t.allTags=e.filter((function(e){return-1===(t.docMeta.tags||[]).findIndex((function(t){return t.label===e.label}))})))}))}},{key:"reload",value:function(){var t=this,e=this.$store.getters.server.server;e&&e.getMeta(this.id).then((function(e){"error"in e||t.$emit("update:meta",Object(j["a"])(Object(j["a"])({},e),{},{identifier:t.id}))})).then((function(){t.reloadTags()}))}},{key:"created",value:function(){this.reload()}}]),a}(d["d"]));Object(u["a"])([Object(d["b"])()],Oe.prototype,"id",void 0),Object(u["a"])([Object(d["c"])("meta")],Oe.prototype,"docMeta",void 0),Object(u["a"])([Object(d["e"])("label")],Oe.prototype,"change",null),Object(u["a"])([Object(d["e"])("type")],Oe.prototype,"typeChanged",null),Oe=Object(u["a"])([Object(d["a"])({})],Oe);var je=Oe,Ce=je,$e=(a("1077"),a("cd55")),Ve=a("49e2"),Se=a("c865"),De=a("0393"),Te=Object(h["a"])(Ce,_e,ke,!1,null,"d345c402",null),Pe=Te.exports;A()(Te,{VBtn:L["a"],VCard:gt["a"],VChip:ie["a"],VCol:I["a"],VContainer:E["a"],VDatePicker:Et["a"],VDivider:U["a"],VExpansionPanel:$e["a"],VExpansionPanelContent:Ve["a"],VExpansionPanelHeader:Se["a"],VExpansionPanels:De["a"],VForm:F["a"],VIcon:z["a"],VMenu:Y["a"],VRadio:$t["a"],VRadioGroup:Vt["a"],VRow:K["a"],VTextField:tt["a"]});var Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-3"},[a("v-card",{staticClass:"list",attrs:{outlined:"",loading:t.loading}},[a("v-progress-linear",{attrs:{indeterminate:"",active:t.loading}}),t.loading?a("v-card-text",[t._v(" Loading Comments ")]):t.meta.comments&&0!==t.meta.comments.length?t._e():a("v-card-text",[t._v(" No Comments found ")]),t._l(t.meta.comments,(function(e,r){return a("div",{key:e.created},[0!==r?a("v-divider"):t._e(),a("v-card-text",[a("span",{staticStyle:{"white-space":"pre-line"}},[t._v(t._s(e.text))]),a("span",{staticClass:"timestamp"},[a("time-ago",{attrs:{datetime:e.created}},[t._v(t._s(e.created))])],1)])],1)}))],2),a("v-form",{ref:"form",staticClass:"d-flex pt-3 align-stretch",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-textarea",{attrs:{outlined:"",rules:t.commentRules,label:"New Comment",required:"",rows:"1","auto-grow":""},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),a("v-btn",{staticClass:"ml-1",staticStyle:{height:"unset","margin-bottom":"30px"},attrs:{outlined:""},on:{click:t.add}},[t._v(" Add ")])],1)],1)},Ae=[],Re=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.allTags=[],t.loading=!0,t.comment="",t.valid=!1,t.commentRules=[function(t){return!!t||"Can’t make empty comments"}],t}return Object(s["a"])(a,[{key:"add",value:function(){var t=Object(xe["a"])(Object(we["a"])().mark((function t(){var e=this;return Object(we["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.valid=this.$refs.form.validate(),this.valid&&this.$store.getters.server.server.addComment(this.id,this.comment).then((function(){e.$refs.form.reset(),e.reload()}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"reload",value:function(){var t=this;this.$store.getters.server.server.getMeta(this.id).then((function(e){t.loading=!1,"error"in e||t.$emit("update:meta",Object(j["a"])(Object(j["a"])({},e),{},{identifier:t.id}))}))}},{key:"created",value:function(){this.reload()}}]),a}(d["d"]);Object(u["a"])([Object(d["b"])()],Re.prototype,"id",void 0),Object(u["a"])([Object(d["c"])("meta")],Re.prototype,"docMeta",void 0),Re=Object(u["a"])([Object(d["a"])({})],Re);var Le=Re,Ie=Le,Ee=(a("a5c2"),a("a844")),Ue=Object(h["a"])(Ie,Me,Ae,!1,null,"033efdaf",null),Fe=Ue.exports;A()(Ue,{VBtn:L["a"],VCard:gt["a"],VCardText:jt["c"],VDivider:U["a"],VForm:F["a"],VProgressLinear:me["a"],VTextarea:Ee["a"]});var ze=a("10ee"),qe=a("3022"),Be=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.startsWith("http://")&&t.startsWith("https://")||(t="https://"+t);try{var e=new URL(t);return e.href.replace(/\/$/,"")}catch(a){return!1}},Ne=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.meta=null,t.loadingMeta=!1,t.page=1,t.numPages=0,t.pdfdata=void 0,t.error=!1,t.scale="page-width",t.loading=0,t.resize=!0,t.downloading=!1,t.dialog={open:!1,url:"",pw:"",valid:!1,urlRules:[function(t){return!!t||"URL is required"},function(t){var e=Be(t);return!!e||"URL has to be valid"}],pwRules:[function(t){return!!t||"Password is required"}]},t}return Object(s["a"])(a,[{key:"pdfsrc",value:function(){if(this.meta)return{url:(this.$store.getters.server.url.startsWith("https://")||this.$store.getters.server.url.startsWith("http://")?this.$store.getters.server.url:"https://"+this.$store.getters.server.url)+"/doc/"+this.id,httpHeaders:{Authorization:this.$store.getters.server.server.headers.get("Authorization")}}}},{key:"download",value:function(){var t=this;if(this.meta){this.downloading=!0;var e=(this.$store.getters.server.url.startsWith("https://")||this.$store.getters.server.url.startsWith("http://")?this.$store.getters.server.url:"https://"+this.$store.getters.server.url)+"/doc/"+this.id,a={headers:{Authorization:this.$store.getters.server.server.headers.get("Authorization")}};fetch(e,a).then((function(t){return t.blob()})).then((function(e){var a;t.downloading=!1;var r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=(null===(a=t.meta)||void 0===a?void 0:a.title)||t.id,r.click()}))}}},{key:"deleteDocument",value:function(t){var e=this;if(confirm("Are you sure you want to delete this Document?")){var a=this.$store.getters.server.server;a&&this.meta&&a.deleteDocument(t).then((function(t){"error"in t?alert(Object(qe["inspect"])(t)):e.$router.go(-1)}))}}},{key:"updateTitle",value:function(){var t=this.$store.getters.server.server;t&&this.meta&&t.setDocumentTitle(this.id,this.meta.title||"")}},{key:"loadingChange",value:function(){var t=document.getElementsByTagName("canvas");this.loading=t.length;for(var e=0;e<t.length;e++)t[e].classList.add("elevation-4")}},{key:"scaleDown",value:function(){this.resize=!1,this.scale=Math.round(20*parseFloat(""+this.scale))/20,this.scale>.15?this.scale=this.scale-.05:this.scale=.1}},{key:"scaleUp",value:function(){this.resize=!1,this.scale=Math.round(20*parseFloat(""+this.scale))/20,this.scale<1.95?this.scale=this.scale+.05:this.scale=2}},{key:"scaleOff",value:function(){this.scale="page-width",this.resize=!0}},{key:"getScale",value:function(){return parseInt(""+100*+this.scale)}},{key:"setScale",value:function(t){this.resize=!1,this.scale=t/100}},{key:"getPdf",value:function(){var t=this,e=(this.$store.getters.server.url.startsWith("https://")||this.$store.getters.server.url.startsWith("http://")?this.$store.getters.server.url:"https://"+this.$store.getters.server.url)+"/doc/"+this.id;this.pdfdata=ze["a"].createLoadingTask({url:e,httpHeaders:{Authorization:this.$store.getters.server.server.headers.get("Authorization")}}),this.pdfdata.then((function(e){t.numPages=e.numPages})).catch((function(e){t.error=e}))}},{key:"mounted",value:function(){if(this.$route.query.s&&this.$store.commit("selectServer",{url:this.$route.query.s}),this.$store.getters.server)this.finishSetup();else{var t=this.$route.query.s?Array.isArray(this.$route.query.s)?this.$route.query.s[0]||"":this.$route.query.s:"";this.dialog.open=!0,this.dialog.url=t}}},{key:"closeDialog",value:function(){this.$store.commit("selectServer",{url:this.dialog.url,password:this.dialog.pw}),this.finishSetup()}},{key:"finishSetup",value:function(){var t,e=this;this.loadingMeta=!0;var a=null===(t=this.$store.getters.server)||void 0===t?void 0:t.server;a&&a.getMeta(this.id).then((function(t){e.loadingMeta=!1,"error"in t?(e.error=t,e.dialog.url=e.$route.query.s?Array.isArray(e.$route.query.s)?e.$route.query.s[0]||"":e.$route.query.s:"",e.dialog.open=!0):(e.dialog.open=!1,e.meta=t)})),this.getPdf()}},{key:"reloadTags",value:function(){var t,e=this;this.loadingMeta=!0;var a=null===(t=this.$store.getters.server)||void 0===t?void 0:t.server;a&&a.getTags(this.id).then((function(t){e.loadingMeta=!1,!("error"in t)&&e.meta&&(e.meta.tags=t)}))}}]),a}(d["d"]);Object(u["a"])([Object(d["b"])()],Ne.prototype,"id",void 0),Ne=Object(u["a"])([Object(d["a"])({components:{pdf:ze["a"],TagAdder:Pe,CommentsList:Fe}})],Ne);var We=Ne,Ge=We,He=(a("37b0"),a("08f7"),a("0798")),Ye=a("1f4f"),Je=a("71d9"),Xe=Object(h["a"])(Ge,be,ye,!1,null,"528febee",null),Ke=Xe.exports;A()(Xe,{VAlert:He["a"],VApp:de["a"],VAppBar:R["a"],VAppBarNavIcon:ve["a"],VBtn:L["a"],VCard:gt["a"],VCardActions:jt["a"],VCardText:jt["c"],VCardTitle:jt["d"],VCol:I["a"],VContainer:E["a"],VDialog:Ct["a"],VForm:F["a"],VIcon:z["a"],VMain:H["a"],VProgressLinear:me["a"],VRow:K["a"],VSheet:Qt["a"],VSimpleTable:Ye["a"],VSpacer:Z["a"],VTextField:tt["a"],VToolbar:Je["a"],VToolbarTitle:et["b"],VTooltip:at["a"]});var Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{staticClass:"py-0",attrs:{app:"",color:"primary"}},[a("v-toolbar",{staticClass:"col-md-5 col-12 pa-0",attrs:{flat:"",dark:"",color:"primary"}},[a("v-tooltip",{attrs:{bottom:"","open-delay":"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-app-bar-nav-icon",t._g(t._b({on:{click:function(e){e.stopPropagation(),t.$router.go(-1),t.$router.push("/")}}},"v-app-bar-nav-icon",n,!1),r),[a("v-icon",[t._v("mdi-arrow-left")])],1)]}}])},[t._v(" Go Back ")]),a("v-toolbar-title"),a("v-spacer")],1)],1),a("v-main",{attrs:{app:""}},[t.uploaded?a("div",[t._v(" The document has been uploaded. "),a("a",{on:{click:function(e){return e.stopPropagation(),t.$router.replace({path:t.docPath})}}},[t._v(t._s(t.docPath))])]):a("div",[t._v(" Document temporarily stored by service worker: "),a("a",{attrs:{href:t.tmpDoc}},[t._v(t._s(t.tmpDoc))]),t._v(". ")])])],1)},Qe=[],ta=function(t){Object(l["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(o["a"])(this,a),t=e.apply(this,arguments),t.uploaded=!1,t.tmpDoc="/ipfs/"+t.$route.query.file,t}return Object(s["a"])(a,[{key:"mounted",value:function(){var t=Object(xe["a"])(Object(we["a"])().mark((function t(){var e,a,r,n,i,o;return Object(we["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==(e=this.$store.getters.server)&&void 0!==e&&e.server){t.next=2;break}throw new Error("No store configured!");case 2:return r=null===(a=this.$store.getters.server)||void 0===a?void 0:a.server,t.next=5,fetch(this.tmpDoc);case 5:return n=t.sent,t.next=8,n.blob();case 8:return i=t.sent,t.next=11,r.uploadFile(i);case 11:if(o=t.sent,!o.location){t.next=20;break}return this.uploaded=!0,this.docPath=o.location,t.next=17,fetch(this.tmpDoc,{method:"DELETE"});case 17:this.$router.replace({path:this.docPath}),t.next=21;break;case 20:throw o;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),a}(d["d"]);ta=Object(u["a"])([Object(d["a"])({components:{}})],ta);var ea=ta,aa=ea,ra=Object(h["a"])(aa,Ze,Qe,!1,null,null,null),na=ra.exports;A()(ra,{VApp:de["a"],VAppBar:R["a"],VAppBarNavIcon:ve["a"],VIcon:z["a"],VMain:H["a"],VSpacer:Z["a"],VToolbar:Je["a"],VToolbarTitle:et["b"],VTooltip:at["a"]}),r["a"].use(k["a"]);var ia=[{path:"/",name:"home",component:ge,props:function(t){return{page:t.query.p}}},{path:"/doc/:id",name:"doc",component:Ke,props:!0},{path:"/share-target",name:"sharetarget",component:na,props:!0}],oa=new k["a"]({mode:"history",base:"/tridoc-cockpit/",routes:ia}),sa=oa,la=a("2f62"),ca=a("73a1"),ua=a.n(ca);r["a"].use(la["a"]);var da=[];function va(t){var e;localStorage.setItem("currentserver",(null===(e=t.currentServer)||void 0===e?void 0:e.toString())||""),localStorage.setItem("servers",JSON.stringify(t.servers.map((function(t){var e=t.password,a=t.url;return{password:e,url:a}}))))}var pa=new la["a"].Store({state:{servers:da,currentServer:null,viewSettings:{darkMode:!1,dense:!1,grid:!1}},getters:{server:function(t){return null===t.currentServer?null:t.servers[t.currentServer]}},mutations:{currentServer:function(t,e){var a=e.index;a>=t.servers.length||a<0?console.warn("Trying to select nonexistent server"):t.currentServer=a},selectServer:function(t,e){var a=e.url,r=e.password,n=t.servers.findIndex((function(t){return t.url===a}));if(n>-1)r&&t.servers[n].password!==r&&(t.servers[n]={server:new ua.a(a,"tridoc",r),password:r,url:a}),t.currentServer=n;else{if(!r)return va(t),null;t.currentServer=t.servers.push({server:new ua.a(a,"tridoc",r),password:r,url:a})-1}return va(t),t.currentServer},addServer:function(t,e){var a=e.url,r=e.password,n=t.servers.findIndex((function(t){return t.url===a}));return n>-1?r&&t.servers[n].password!==r&&(t.servers[n]={server:new ua.a(a,"tridoc",r),password:r,url:a}):r&&t.servers.push({server:new ua.a(a,"tridoc",r),password:r,url:a}),va(t),t.servers.length},removeServer:function(t,e){var a=e.index;a>=t.servers.length||a<0?console.warn("Trying to remove nonexistent server"):(t.servers.splice(a,1),va(t))},viewSettings:function(t,e){var a=e.darkMode,r=e.dense,n=e.grid;void 0!==a&&(t.viewSettings.darkMode=a),void 0!==r&&(t.viewSettings.dense=r),void 0!==n&&(t.viewSettings.grid=n),localStorage.setItem("viewSettings",JSON.stringify(t.viewSettings))}},actions:{restore:function(t){var e=t.commit,a=JSON.parse(localStorage.getItem("servers")||"false"),r=parseInt(localStorage.getItem("currentserver")||"0",10);a&&a.forEach((function(t){var a=t.password,r=t.url;e("addServer",{password:a,url:r})})),e("currentServer",{index:r});var n=JSON.parse(localStorage.getItem("viewSettings")||"false");n&&e("viewSettings",n)}}});r["a"].config.productionTip=!1,"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("./sw.js")})),new r["a"]({vuetify:_,router:sa,store:pa,render:function(t){return t(g)}}).$mount("#app")},de56:function(t,e,a){"use strict";var r=a("7f0d"),n=a.n(r);n.a},df06:function(t,e,a){"use strict";var r=a("48a6"),n=a.n(r);n.a},f135:function(t,e,a){"use strict";var r=a("28d8"),n=a.n(r);n.a},fd45:function(t,e,a){},fe9c:function(t,e,a){},ff85:function(t,e,a){"use strict";var r=a("abbb"),n=a.n(r);n.a}});
//# sourceMappingURL=app.9c65b8a4.js.map